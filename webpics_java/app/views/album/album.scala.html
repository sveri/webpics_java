@(photos: List[models.pic.Photo], albumId: Long)

@scripts = {
	<script src="@routes.Assets.at("javascripts/galleria/galleria-1.2.8.min.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/album/jQueryRotateCompressed.2.2.js")" type="text/javascript"></script>
	<style>
	    #galleria{ width: 900px; height: 600px; background: #000 }
	</style>
}

@navleft = {
	@navLeftPartial(albumId)
}

@main(Messages("pix.navigation.albums"),"", scripts, navleft) {
 	<div id="galleria">
		@for(photo <- photos){
 			<a href="@routes.Album.getFile(albumId, photo.name, "normal")">
 				<img data-big="@routes.Album.getFile(albumId, photo.name, "big")" 
 					src="@routes.Album.getFile(albumId, photo.name, "thumbs")"  class="display-image">
 					</a>
		}
    </div>
    
    <button id="fullscreen" class="btn btn-primary">Fullscreen</button>
    <button id="rotate-left" class="btn btn-primary">Rotate left</button>
    <button id="rotate-right" class="btn btn-primary">Rotate right</button>
    
	<script type="text/javascript">
	var value = 0;
	
		Galleria.loadTheme('@routes.Assets.at("javascripts/galleria/themes/classic/galleria.classic.min.js")');
		Galleria.run('#galleria');
		var gallery = Galleria.get(0);

		$('#rotate-right').click(function() {
			rotateRight();
		});
		$('#rotate-left').click(function() {
			rotateLeft();
		});
		
		gallery.attachKeyboard({
			13: function(){
				console.log('bin da')
			},
			left: gallery.prev,
			right: rotateRight()
		});
		
		function rotateRight(){
			value += 90;
			$('#galleria').find('.galleria-stage').find('.galleria-images').find('.galleria-image').each(function(){
				$(this).find('img').rotate(value);
				console.log(value);
				//console.log($(this).find('img').attr('src'));
			});
		}
		
		function rotateLeft(){
			value -= 90;
			$('#galleria').find('.galleria-stage').find('.galleria-images').find('.galleria-image').each(function(){
				$(this).find('img').rotate(value);
				//console.log($(this).find('img').attr('src'));
				console.log(value);
			});
		}
		
		$('#fullscreen').click(function() {
	        gallery.enterFullscreen(); // will go full screen when the #fullscreen element is clicked
	    });
	</script>

	@*
	<input type="hidden" value="1" id="albumId"/>
	*@
}
